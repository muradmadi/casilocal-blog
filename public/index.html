<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self';">
    <meta
      name="description"
      content="CasiLocal - Your guide to the best restaurants, bars, and events in Madrid for students"
    />
    <title>CasiLocal</title>

    <!-- Canonical URL -->
    <link rel="canonical" href="https://casilocal.com/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://casilocal.com/">
    <meta property="og:title" content="CasiLocal - Madrid, unfiltered">
    <meta property="og:description" content="CasiLocal - Your guide to the best restaurants, bars, and events in Madrid for students">
    <meta property="og:image" content="https://casilocal.com/assets/images/hero-image.jpg">
    <meta property="og:site_name" content="CasiLocal">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://casilocal.com/">
    <meta name="twitter:title" content="CasiLocal - Madrid, unfiltered">
    <meta name="twitter:description" content="CasiLocal - Your guide to the best restaurants, bars, and events in Madrid for students">
    <meta name="twitter:image" content="https://casilocal.com/assets/images/hero-image.jpg">

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

    <!-- Web App Manifest (PWA) -->
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/styles.css" />
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "CasiLocal",
      "url": "https://casilocal.com",
      "logo": "https://casilocal.com/assets/images/logo.png",
      "description": "Your guide to the best restaurants, bars, and events in Madrid for students",
      "sameAs": []
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "CasiLocal",
      "url": "https://casilocal.com",
      "description": "Madrid, unfiltered. The static guide to the capital. No tourist traps, just the spots where locals actually live, eat, and stay."
    }
    </script>
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div id="navbar-container"></div>

    <main id="main-content">
      <section class="hero">
        <div class="container">
          <div class="hero-grid">
            <div class="hero-text">
              <h1>Madrid, unfiltered.</h1>
              <p class="hero-subtext">
                The static guide to the capital. No tourist traps, just the
                spots where locals actually live, eat, and stay.
              </p>
              <div class="hero-stats">
                <div class="hero-stat">
                  <div class="hero-stat-number">8</div>
                  <div class="hero-stat-label">Categories</div>
                </div>
                <div class="hero-stat-divider"></div>
                <div class="hero-stat">
                  <div class="hero-stat-number">50+</div>
                  <div class="hero-stat-label">Locations</div>
                </div>
                <div class="hero-stat-divider"></div>
                <div class="hero-stat">
                  <div class="hero-stat-number">100%</div>
                  <div class="hero-stat-label">Local</div>
                </div>
              </div>
              <div id="hero-button-container"></div>
              <div class="hero-categories">
                <div class="hero-category-label">Explore by category:</div>
                <div class="hero-category-links">
                  <a
                    href="/blog/category/restaurants.html"
                    class="hero-category-link"
                    >Restaurants</a
                  >
                  <a href="/blog/category/bars.html" class="hero-category-link"
                    >Bars</a
                  >
                  <a
                    href="/blog/category/events.html"
                    class="hero-category-link"
                    >Events</a
                  >
                  <a
                    href="/blog/category/study-spots.html"
                    class="hero-category-link"
                    >Study Spots</a
                  >
                </div>
              </div>
            </div>
            <div class="hero-image-container">
              <div class="hero-image-wrapper">
                <img
                  src="/assets/images/hero-image.jpg"
                  alt="Madrid"
                  class="hero-image"
                  width="800"
                  height="600"
                  loading="eager"
                />
                <div class="hero-image-overlay">
                  <div class="hero-image-label">Madrid, Spain</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <h2 class="section-title">Featured Content</h2>
          <div class="blog-grid" id="featured-posts">
            <!-- Featured posts will be loaded here -->
            <p style="text-align: center; color: var(--text-light)">
              Loading featured posts...
            </p>
          </div>
        </div>
      </section>

      <section class="section" style="background-color: var(--bg-light)">
        <div class="container">
          <h2 class="section-title">About CasiLocal</h2>
          <div style="max-width: 800px; margin: 0 auto; text-align: center">
            <p style="font-size: 1.125rem; margin-bottom: 1.5rem">
              CasiLocal is your go-to resource for discovering the vibrant
              student life in Madrid. We share insider tips on the best
              restaurants, trendy bars, exciting events, and hidden gems that
              make Madrid an amazing city for students.
            </p>
            <a href="/about.html" class="button button-outline">Learn More</a>
          </div>
        </div>
      </section>
    </main>

    <div id="footer-container"></div>

    <script src="/js/components/button.js"></script>
    <script src="/js/components/navbar.js"></script>
    <script src="/js/components/footer.js"></script>
    <script src="/js/main.js"></script>
    <script>
      // Initialize Feather icons
      if (typeof feather !== 'undefined') {
        feather.replace();
      }
    </script>
    <script>
      // Register service worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('Service Worker registered:', registration.scope);
            })
            .catch((error) => {
              console.log('Service Worker registration failed:', error);
            });
        });
      }
    </script>
    <script>
      // Initialize hero button
      document.addEventListener("DOMContentLoaded", function () {
        const heroButtonContainer = document.getElementById(
          "hero-button-container"
        );
        if (heroButtonContainer) {
          heroButtonContainer.innerHTML = Button.create("Browse the Guides", {
            type: "primary",
            href: "/blog/index.html",
          });
        }
      });
    </script>
    <script>
      // Load featured posts on homepage
      document.addEventListener("DOMContentLoaded", function () {
        const featuredContainer = document.getElementById("featured-posts");
        
        if (!featuredContainer) {
          console.warn("Featured posts container not found");
          return;
        }

        // Show loading state
        featuredContainer.innerHTML = '<p style="text-align: center; color: var(--text-light);">Loading featured posts...</p>';

        fetch("/blog/index.html")
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.text();
          })
          .then((html) => {
            try {
              const parser = new DOMParser();
              const doc = parser.parseFromString(html, "text/html");
              
              // Check for parsing errors
              const parserError = doc.querySelector("parsererror");
              if (parserError) {
                throw new Error("Failed to parse HTML");
              }

              const blogCards = doc.querySelectorAll(".blog-card");

              if (blogCards.length > 0) {
                featuredContainer.innerHTML = "";
                // Show first 3 posts as featured
                Array.from(blogCards)
                  .slice(0, 3)
                  .forEach((card) => {
                    featuredContainer.appendChild(card.cloneNode(true));
                  });
              } else {
                featuredContainer.innerHTML =
                  '<p style="text-align: center; color: var(--text-light);">No posts yet. Check back soon!</p>';
              }
            } catch (parseError) {
              console.error("Error parsing featured posts HTML:", parseError);
              throw parseError;
            }
          })
          .catch((error) => {
            console.error("Error loading featured posts:", error);
            featuredContainer.innerHTML =
              '<p style="text-align: center; color: var(--text-light);">Unable to load featured posts. Please refresh the page to try again.</p>';
          });
      });
    </script>
  </body>
</html>
